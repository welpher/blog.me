import{_ as a,c as s,o as e,U as n,aE as p,aF as t}from"./chunks/framework.I0qYP7JU.js";const f=JSON.parse('{"title":"华硕Pike 2008刷IT模式","description":"","frontmatter":{"id":1063,"title":"华硕Pike 2008刷IT模式","author":"welpher.yu","date":"2020-08-05T21:47:11.000Z","tags":["HBA卡"],"categories":["居家折腾"]},"headers":[],"relativePath":"posts/2020/asus-pike-2008-to-it-mode.md","filePath":"posts/2020/asus-pike-2008-to-it-mode.md"}'),i={name:"posts/2020/asus-pike-2008-to-it-mode.md"},r=n('<h4 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h4><p>最近把 Hp Microserver Gen8 给卖了，买了些二手垃圾回来组了台 C602 平台 E5 处理器的塔式服务器。关于组这个服务器，后面有空再表，多少还有些后悔的，因为功耗要差不多 100W，之前 gen8 四盘才 50W 左右，对于一台 NAS 来说，100W 的功耗还是挺高的。</p><p>主板为华硕的<a href="https://www.asus.com.cn/supportonly/Z9PA-U8/" target="_blank" rel="noreferrer">Z9PA-U8</a>,单路，带 IPMI2.0，需要买一块<a href="https://www.asus.com.cn/supportonly/ASMB6-iKVM/HelpDesk/" target="_blank" rel="noreferrer">ASMB6-iKvm</a>的管理卡。</p><p>主板上有很多 SATA 口，大多是 SATA 2.0 的，还有 8 个 SATA3.0 的口需要一种叫 pike 卡的东西来启用，于是花了二十来块钱买了张<a href="https://www.asus.com/us/Commercial-Servers-Workstations/PIKE_2008/" target="_blank" rel="noreferrer">Pike 2008</a>，官网上的固件没有 IT 模式的，都是 IR 模式。 <img src="'+p+'" alt="pike2008"></p><h4 id="it-和-ir-有什么区别" tabindex="-1">IT 和 IR 有什么区别？ <a class="header-anchor" href="#it-和-ir-有什么区别" aria-label="Permalink to &quot;IT 和 IR 有什么区别？&quot;">​</a></h4><p>IT： Initiator Target IR： Integrated RAID 一个是直连主板，一个是硬件 RAID 模式。</p><p>raid 模式最怕的就是卡坏了，或者硬盘坏了。用的时候笑哈哈，硬盘坏了就惨了，现在动不动几个 T 的硬盘，那恢复时间可是相当的长啊，而且坏了一块，如果再坏一块，所有数据就都没有了。所以直接搞 IT 模式，组 snapRaid</p><h4 id="刷-it-模式" tabindex="-1">刷 IT 模式 <a class="header-anchor" href="#刷-it-模式" aria-label="Permalink to &quot;刷 IT 模式&quot;">​</a></h4><p>参考<a href="https://gist.github.com/pjobson/9ec25f7fc991f28d132ca813ab1bd541" target="_blank" rel="noreferrer">Flashing Asus 2008 PIKE to IT Mode</a>,分为以下几步：</p><h5 id="_1、先获取-pike-卡背面的码-卡的地址" tabindex="-1">1、先获取 PIKE 卡背面的码，卡的地址 <a class="header-anchor" href="#_1、先获取-pike-卡背面的码-卡的地址" aria-label="Permalink to &quot;1、先获取 PIKE 卡背面的码，卡的地址&quot;">​</a></h5><p><img src="'+t+`" alt="pike2008code"> 就是这个以 5000 打头的。</p><h5 id="_2、给-u-盘刷入-freedos-系统" tabindex="-1">2、给 U 盘刷入 FreeDOS 系统 <a class="header-anchor" href="#_2、给-u-盘刷入-freedos-系统" aria-label="Permalink to &quot;2、给 U 盘刷入 FreeDOS 系统&quot;">​</a></h5><p>下载<a href="https://rufus.ie/zh_CN.html" target="_blank" rel="noreferrer">rufus</a>,在 Format Options 里选择 Create a bootable disk using 选 FreeDOS 即可。</p><h4 id="_3、把-it-模式固件复制到刚刚的-u-盘里" tabindex="-1">3、把 IT 模式固件复制到刚刚的 U 盘里 <a class="header-anchor" href="#_3、把-it-模式固件复制到刚刚的-u-盘里" aria-label="Permalink to &quot;3、把 IT 模式固件复制到刚刚的 U 盘里&quot;">​</a></h4><p>下载<a href="https://gist.github.com/pjobson/9ec25f7fc991f28d132ca813ab1bd541/raw/4468546bfaa499d05a9f244cbcce6a200b1b62e0/sas_flash_files.zip" target="_blank" rel="noreferrer">sas flash</a>，解压后复制到 U 盘。</p><h4 id="_4、启动进入-freedos" tabindex="-1">4、启动进入 FreeDOS <a class="header-anchor" href="#_4、启动进入-freedos" aria-label="Permalink to &quot;4、启动进入 FreeDOS&quot;">​</a></h4><p>一定要移除多余的 SAS 卡，及其它硬盘什么的，然后进入 FreeDOS 系统，切换到我们复制的固件文件夹。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sas2flsh.exe -c 0 -list</span></span></code></pre></div><p>会得到 sas 卡的信息，其中 SAS Address 这个就是我们要用到的卡地址啦。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Adapter Selected is a LSI SAS: SAS2008(B2)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Controller Number  : 0</span></span>
<span class="line"><span>Controller  : SAS2008(B2)</span></span>
<span class="line"><span>PCI Address  : 00:01:00:00</span></span>
<span class="line"><span>SAS Address  : 5000xxx-x-xxxx-xxxx</span></span>
<span class="line"><span>NVDATA Version (Default)  : 14.01.00.08</span></span>
<span class="line"><span>NVDATA Version (Persistent)  : 14.01.00.08</span></span>
<span class="line"><span>Firmware Product ID  : 0x2213 (IT)</span></span>
<span class="line"><span>Firmware Version  : 20.00.07.00</span></span>
<span class="line"><span>NVDATA Vendor  : LSI</span></span>
<span class="line"><span>NVDATA Product ID  : SAS9211-8i</span></span>
<span class="line"><span>BIOS Version  : N/A</span></span>
<span class="line"><span>UEFI BSD Version  : N/A</span></span>
<span class="line"><span>FCODE Version  : N/A</span></span>
<span class="line"><span>Board Name  : SAS9211-8i</span></span>
<span class="line"><span>Board Assembly  : N/A</span></span>
<span class="line"><span>Board Tracer Number  : N/A</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Finished Processing Commands Successfully.</span></span>
<span class="line"><span>Exiting SAS2Flash.</span></span></code></pre></div><p>然后备份 SAS 卡，哪天想回到 IR 模式，很方便</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>megarec.exe -readsbr 0 pike2008.sbr</span></span></code></pre></div><p>清空 SAS 卡</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>megarec.exe -writesbr 0 sbrempty.bin</span></span>
<span class="line"><span>megarec.exe -cleanflash 0</span></span></code></pre></div><p>然后，一定要重启， 不然后面的操作不会成功。 重启后，刷入 IT Mode 固件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sas2flsh.exe -o -f 2118it.bin -b mptsas2.rom</span></span></code></pre></div><p>重置之前的 5000 开始的地址</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sas2flsh.exe -o -sasadd 5000xxxxxxxxxxxx</span></span></code></pre></div><p>然后你就会发现，已经是 it 模式了</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sas2flsh.exe -listall</span></span></code></pre></div><p>参考网站写得很全。</p><p>参考： 1、<a href="https://gist.github.com/pjobson/9ec25f7fc991f28d132ca813ab1bd541" target="_blank" rel="noreferrer">https://gist.github.com/pjobson/9ec25f7fc991f28d132ca813ab1bd541</a></p>`,32),l=[r];function o(c,d,h,u,b,g){return e(),s("div",null,l)}const k=a(i,[["render",o]]);export{f as __pageData,k as default};
