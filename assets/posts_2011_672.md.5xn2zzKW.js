import{_ as s,c as a,o as t,U as e,ag as p}from"./chunks/framework.I0qYP7JU.js";const k=JSON.parse('{"title":"vps简单的设置","description":"","frontmatter":{"title":"vps简单的设置","tags":["vps"],"id":672,"author":"welpher.yu","categories":["服务器"],"date":"2011-12-23T23:24:49.000Z"},"headers":[],"relativePath":"posts/2011/672.md","filePath":"posts/2011/672.md"}'),i={name:"posts/2011/672.md"},n=e('<p>photonvps的xen方案升级了（两个低端方案）</p><p><a href="http://www.photonvps.com/billing/aff.php?aff=2271" target="_blank" rel="noreferrer"><img src="'+p+`" alt=""></a></p><p>我没有在第一时间升级方案，升级方案会做数据的备份等麻烦的事情，发支持单的话,photonvps的直接把vps重置了，数据肯定没有了。为了平滑的过渡到新的vps，故我在旧的vps套餐快到期的时候再买了一个vps，然后做数据的迁移工作。正好现在可以写一点vps的一些东西，努力做到图文并貌。</p><p>当然了，买到vps了，需要做一些简单的设置，比如修改ssh端口，再比如禁止root远程登陆神马的。</p><p>SSH都知道了，VPS最常用的管理软件了，默认端口为22，默认管理员为root，这些地球人都知道的。所以黑客肯定知道了，使用默认的SSH端口和root用户名，对VPS的安全构成很大的威胁，直接可以暴力破解。</p><p><strong>修改SSH端口：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#vim /etc/ssh/sshd_config</span></span></code></pre></div><p>打开文件，找到#Port 22这一行修改为Port 1234，然后</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#service sshd restart</span></span></code></pre></div><p>现在SSH端口就已经修改成功了，以后登录的时候记得这个端口号。</p><p><strong>禁止root远程登录：</strong></p><p>增加一个普通权限的用户，并设置密码：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#useradd test</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#passwd test</span></span></code></pre></div><p>然后禁止root的SSH远程登录</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#vim /etc/ssh/sshd_config</span></span></code></pre></div><p>把其中的</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>#PermitRootLogin yes</span></span></code></pre></div><p>改为</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>#PermitRootLogin no</span></span></code></pre></div><p>然后重启sshd服务</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#service sshd restart</span></span></code></pre></div><p>然后管理用普通用户test登录了。</p><p><strong>修改时区：</strong></p><ol><li><p>运行#tzselect 选择Asia/shanghai</p></li><li><p>运行#cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</p></li></ol><p><strong>修改 root 密码：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#passwd root</span></span></code></pre></div><p>附：部分Xen的CentOS root 密码只支持8位的解决方法：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#vim /etc/pam.d/system-auth</span></span></code></pre></div><p>找的 password sufficient pam_unix.so nullok use_authtok shadow（因具体安装环境有所不同）</p><p>将 “shadow” 替换为 “md5”</p><p>重启SSH</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#service sshd restart</span></span></code></pre></div>`,32),o=[n];function l(h,c,d,r,g,v){return t(),a("div",null,o)}const b=s(i,[["render",l]]);export{k as __pageData,b as default};
