import{_ as e,c as t,o as a,U as r}from"./chunks/framework.I0qYP7JU.js";const b=JSON.parse('{"title":"linux(centos5.5)下安装apache2.4.2","description":"","frontmatter":{"title":"linux(centos5.5)下安装apache2.4.2","tags":["apache"],"id":794,"author":"welpher.yu","categories":["服务器"],"date":"2012-07-10T09:34:59.000Z"},"headers":[],"relativePath":"posts/2012/794.md","filePath":"posts/2012/794.md"}'),p={name:"posts/2012/794.md"},n=r(`<p>自己的网站一直使用的是nginx，没有在linux下安装过apache。最近公司大规模的迁移服务器，和我相关的几个业务的服务器都是apache的，有可能需要自己部署，所以在本机的centos5.5上模拟下真实安装。看网上说apache2.4.2各种优点，最重要的说是更加安全了。我就不翻译来自官网的说明了，给出链接<a href="http://www.apache.org/dist/httpd/Announcement2.4.html" target="_blank" rel="noreferrer"> Apache2.4.2介绍</a>。 好，我们言归正传,开始进行安装，下面就是我安装过程的记录，如果你希望全新安装，希望你能看完整个文档再来安装。在centos下安装apache2.4.2并没有那么难，但整个过程中我还是遇见了几个问题，下面把apache2.4.2在linux下的安装过程分享给大家。</p><p><strong>获取apache2.4.2源文件并解压</strong></p><pre class="brush: bash; gutter: true; first-line: 1">wget http://apache.etoak.com//httpd/httpd-2.4.2.tar.gz
tar -zxvf httpd-2.4.2.tar.gz
cd httpd-2.4.2
./configure --prefix=/usr/local/apache2 --enable-so --enable-mods-shared=all --enable-vhost-alias --enable-expires --enable-rewrite --enable-authn-dbm=shared</pre><p>检查过程出现下面错误APR(APACHE PORTABLE RUNTIME)不存在，显示如下</p><blockquote><p>checking for chosen layout... Apache</p><p>checking for working mkdir -p... yes</p><p>checking for grep that handles long lines and -e... /bin/grep</p><p>checking for egrep... /bin/grep -E</p><p>checking build system type... i686-pc-linux-gnu</p><p>checking host system type... i686-pc-linux-gnu</p><p>checking target system type... i686-pc-linux-gnu</p><p>Configuring Apache Portable Runtime library ...</p><p>checking for APR... no</p><p>configure: error: APR not found. Please read the documentation. <strong>安装APR</strong></p></blockquote><p>各个版本的APR下载 <a href="http://apr.apache.org/download.cgi" target="_blank" rel="noreferrer">http://apr.apache.org/download.cgi</a> 安装APR</p><pre class="brush: bash; gutter: true; first-line: 1">wget http://mirror.bjtu.edu.cn/apache//apr/apr-1.4.6.tar.gz
tar -zxvf apr-1.4.6
cd apr-1.4.6
./configure --prefix=/usr/local/apr
make
make install</pre><p><strong>安装完成后继续之前操作</strong></p><pre class="brush: bash; gutter: true; first-line: 1">[root@localhost httpd-2.4.2]# ./configure --prefix=/usr/local/apache2 --enable-so --enable-mods-shared=all --enable-vhost-alias --enable-expires --enable-rewrite --enable-authn-dbm=shared --with-apr=/usr/local/apr</pre><blockquote><p>checking for chosen layout... Apache</p><p>checking for working mkdir -p... yes</p><p>checking for grep that handles long lines and -e... /bin/grep</p><p>checking for egrep... /bin/grep -E</p><p>checking build system type... i686-pc-linux-gnu</p><p>checking host system type... i686-pc-linux-gnu</p><p>checking target system type... i686-pc-linux-gnu</p><p>Configuring Apache Portable Runtime library ...</p><p>checking for APR... yes</p><p>setting CC to &quot;gcc&quot;</p><p>setting CPP to &quot;gcc -E&quot;</p><p>setting CFLAGS to &quot; -g -O2 -pthread&quot;</p><p>setting CPPFLAGS to &quot; -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE&quot;</p><p>setting LDFLAGS to &quot; &quot;</p><p>Configuring Apache Portable Runtime Utility library...</p><p>checking for APR-util... no</p><p>configure: error: APR-util not found. Please read the documentation. <strong>安装APR-util</strong></p></blockquote><pre class="brush: bash; gutter: true; first-line: 1">wget http://mirror.bjtu.edu.cn/apache//apr/apr-util-1.4.1.tar.gz
tar -zxvf apr-util-1.4.1.tar.gz
./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr/
make&amp;&amp;make install</pre><p>安装完成APR-util后继续之前操作</p><p> </p><pre class="brush: bash; gutter: true; first-line: 1">[root@localhost httpd-2.4.2]# ./configure --prefix=/usr/local/apache2 --enable-so --enable-mods-shared=all --enable-vhost-alias --enable-expires --enable-rewrite --enable-authn-dbm=shared --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util/
make &amp;&amp; make install
</pre><p>  安装成功后,</p><pre>cp /usr/local/http/bin/apachectl /etc/rc.d/init.d/httpd
chmod 755 /etc/rc.d/init.d/httpd
/etc/rc.d/init.d/httpd start
</pre><p>本地使用lynx 127.0.0.1 结果是it works 远程上不行，通过关闭防火墙 service iptables stop 远程就可以访问了 如果不想关闭防火墙，放开80端口即可。</p><p>#vi /etc/sysconfig/iptables 增加一行-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT #service iptables restart //重启防火墙 这样就大功告成了。</p>`,18),o=[n];function i(c,s,l,h,u,g){return a(),t("div",null,o)}const f=e(p,[["render",i]]);export{b as __pageData,f as default};
