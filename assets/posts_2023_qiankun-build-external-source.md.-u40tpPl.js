import{_ as a,c as e,o as s,U as t}from"./chunks/framework.I0qYP7JU.js";const _=JSON.parse('{"title":"微前端qiankun打包externals资源复用","description":"","frontmatter":{"id":1068,"title":"微前端qiankun打包externals资源复用","author":"welpher.yu","date":"2023-04-21T11:47:11.000Z","tags":["qiankun","webpack","微前端"],"categories":["web前端"]},"headers":[],"relativePath":"posts/2023/qiankun-build-external-source.md","filePath":"posts/2023/qiankun-build-external-source.md"}'),i={name:"posts/2023/qiankun-build-external-source.md"},n=t('<h2 id="微前端现状" tabindex="-1">微前端现状 <a class="header-anchor" href="#微前端现状" aria-label="Permalink to &quot;微前端现状&quot;">​</a></h2><p>主应用和微应用都会用同一个版本的类库，比如vue/vuex/vue-router/react/react-router/element-ui等，主应用打包一次加载进来，微应用再各打包一次各加载一遍，不利于缩小打包体积，浪费加载时间。</p><p>首先在打包的时候要配置externals，这样就在打包就不会打包进chunk-verdors.xxxxxxx.js里.</p><h2 id="解决方法" tabindex="-1">解决方法 <a class="header-anchor" href="#解决方法" aria-label="Permalink to &quot;解决方法&quot;">​</a></h2><p>首先要保证主应用微应用使用同一版本的类库，使用同一个url，qiankun会将微应用中的外链script标签引入的内容请求到之后，会记录到一个全局变量中，再次使用，会先从全局变量中获取。这样，一个微应用使用后的资源，下一个微应用再使用时就不会再去请求资源了</p><p>微应用利用主应用的资源时，子应用的资源可以添加ignore属性，如</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://map.qq.com/api/gljs?v=1.exp&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ignore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>这样微应用在加载时就不会去加载这个资源了。</p><p>参考文档： <a href="https://qiankun.umijs.org/zh/faq" target="_blank" rel="noreferrer">qiankun faq</a></p>',9),r=[n];function l(p,h,o,k,c,u){return s(),e("div",null,r)}const g=a(i,[["render",l]]);export{_ as __pageData,g as default};
