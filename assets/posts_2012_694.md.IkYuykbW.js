import{_ as s,c as i,o as a,U as p,ah as t}from"./chunks/framework.I0qYP7JU.js";const y=JSON.parse('{"title":"CentOS下安装配置pure-ftpd","description":"","frontmatter":{"title":"CentOS下安装配置pure-ftpd","tags":["centos","pureftpd"],"id":694,"author":"welpher.yu","categories":["服务器"],"date":"2012-01-09T22:33:31.000Z"},"headers":[],"relativePath":"posts/2012/694.md","filePath":"posts/2012/694.md"}'),n={name:"posts/2012/694.md"},h=p(`<blockquote><p><a href="http://www.pureftpd.org/project/pure-ftpd" target="_blank" rel="noreferrer">pure-ftpd</a>，一个很好用的ftp服务端。可以和mysql整合，通过mysql建立和验证帐户，并实现流量限制、磁盘配额限制等功能。这就说明，可以通过自己开发的PHP程序来实现Web管理。其它的功能，大家可以到官网上去看。</p></blockquote><p>我是直接下载的包自己编译安装的。如下</p><p><strong>安装mysql-devel</strong></p><p>首先，如果你要跟mysql整合的话，先安装<a href="http://rpmfind.net/linux/rpm2html/search.php?query=mysql-devel" target="_blank" rel="noreferrer">mysql-devel</a>，进入这个页面选择跟你安装的mysql版本一样的rpm包，然后用rpm –ivh mysql-devel-*.rpm进行安装。</p><p><strong>安装pureftpd</strong></p><p>安装好后，就开始安装pureftpd了</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://download.pureftpd.org/pub/pure-ftpd/releases/pure-ftpd-1.0.35.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zxf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pure-ftpd-1.0.35.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pure-ftpd-1.0.35</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --without-capabilities</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-virtualchroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-pam</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-altlog</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-cookie</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-throttling</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-ratios</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-paranoidmsg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-quotas</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-everything</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>输入这些命令后就把pure-ftpd安装好了。当然了，我之前没有装mysql-devel，会出现一些错误：</p><blockquote><p>checking for mysql_init in -lmysqlclient… no</p><p>configure: error: libmysqlclient is needed for MySQL support</p></blockquote><p>当时困扰了我不少时间，现在你看到我的这个文章，省时了，亲！给个好评吧！</p><p>附上安装的选项：</p><p>PureFTPd有很多的编译配置选项，下面就列出部分主要的配置</p><blockquote><p>--prefix =PREFIX         安装路径</p><p>--with-sysquotas        使用系统磁盘配额 ( 非虚拟)</p><p>--with-altlog                支持选择日志格式( 类似Apache)</p><p>--with-puredb             支持虚拟用户 ( FTP登陆用户而非系统用户)</p><p>--with-extauth            支持扩展验证模块</p><p>--with-pam                  启用PAM验证支持 ( 默认=禁用)</p><p>--with-cookie              启用Cookie支持 ( -F 选项)</p><p>--with-throttling        支持带宽控制 ( 默认=禁用)</p><p>--with-ratios                支持 上传/ 下载 速度控制</p><p>--with-quotas             支持 .ftpquota 文件（指定磁盘配额使用）</p><p>--with-ftpwho            支持pure-ftpwho（查看在线用户的程序）</p><p>--with-largefile           支持大于2G的文件</p><p>--with-welcomemsg       支持 welcome.msg 向后兼容（已经过时）</p><p>--with-uploadscript         上传后允许执行外部脚本 ( 测试阶段)</p><p>--with-virtualhosts          在不同的IP地址提供虚拟服务器功能</p><p>--with-virtualchroot       允许在chroot 的环境下通过符合连接跳转到外部</p><p>--with-diraliases              启用目录别名</p><p>--with-nonroot                普通模式或者说是限制模式. 如果你在该服务器上没有root权限那只有启用该项</p><p>--with-peruserlimits    支持每个用户的并发限制</p><p>--with-language =        语言支持&lt; english | traditional-chinese | simplified-chinese&gt;</p><p>--with-ldap             在LDAP目录中提供用户数据库</p><p>--with-mysql            在MySQL数据库中存放用户数据</p><p>--with-pgsql            在PostgreSQL数据库中存放用户数据</p></blockquote><p><strong>配置</strong></p><p>再然后就是对其进行配置了：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pureftpd-mysql.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration-file/pure-config.pl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/sbin/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/sbin/pure-config.pl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configuration-file/pure-ftpd.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> contrib/redhat.init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rc.d/init.d/pureftpd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> u+x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rc.d/init.d/pureftpd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pureftpd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --level</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2345</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pureftpd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pureftpd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p>输入这些命令后，你会看到：</p><blockquote><p>Starting pure-config.pl: Running: /usr/local/sbin/pure-ftpd --daemonize -A -c50 -B -C8 -D -fftp -H -I15 -L10000:8 -m4 -s -U133:022 -u100 -k99 -Z</p></blockquote><p>然后编辑/etc/pure-ftpd.conf，确保ChrootEveryone 、MySQLConfigFile 和CreateHomeDir是开启的</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ChrootEveryone    yes</span></span>
<span class="line"><span>MySQLConfigFile    /etc/pureftpd-mysql.conf</span></span>
<span class="line"><span>CreateHomeDir    yes</span></span></code></pre></div><p>然后再编辑 /etc/pureftpd-mysql.conf 如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>MYSQLSocket      /tmp/mysql.sock</span></span>
<span class="line"><span>#MYSQLServer     localhost</span></span>
<span class="line"><span>#MYSQLPort       3306</span></span>
<span class="line"><span>MYSQLUser       pureftpd</span></span>
<span class="line"><span>MYSQLPassword   这里输入前面给mysql授权时的密码</span></span>
<span class="line"><span>MYSQLDatabase   pureftpd</span></span>
<span class="line"><span>#MYSQLCrypt md5, cleartext, crypt() or password() - md5 is VERY RECOMMENDABLE uppon cleartext</span></span>
<span class="line"><span>MYSQLCrypt      md5</span></span>
<span class="line"><span>MYSQLGetPW          SELECT Password FROM ftpd WHERE User=&amp;quot;\\L&amp;quot; AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MYSQLGetUID         SELECT Uid FROM ftpd WHERE User=&amp;quot;\\L&amp;quot; AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MYSQLGetGID         SELECT Gid FROM ftpd WHERE User=&amp;quot;\\L&amp;quot;AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MYSQLGetDir         SELECT Dir FROM ftpd WHERE User=&amp;quot;\\L&amp;quot;AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MySQLGetBandwidthUL SELECT ULBandwidth FROM ftpd WHERE User=&amp;quot;\\L&amp;quot;AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MySQLGetBandwidthDL SELECT DLBandwidth FROM ftpd WHERE User=&amp;quot;\\L&amp;quot;AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MySQLGetQTASZ       SELECT QuotaSize FROM ftpd WHERE User=&amp;quot;\\L&amp;quot;AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span>
<span class="line"><span>MySQLGetQTAFS       SELECT QuotaFiles FROM ftpd WHERE User=&amp;quot;\\L&amp;quot;AND status=&amp;quot;1&amp;quot; AND (ipaccess = &amp;quot;*&amp;quot; OR ipaccess LIKE &amp;quot;\\R&amp;quot;)</span></span></code></pre></div><p><strong>创建组和用户以及mysql表创建</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># groupadd ftpgroup –g 10000 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># useradd ftpuser –g ftpgroup –u 10000 –d /dev/null –s /sbin/nologin</span></span></code></pre></div><p>然后进入mysql</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#/usr/local/mysql/bin/mysql -u root -p -S /tmp/mysql.sock</span></span></code></pre></div><p>输入密码后就进入mysql了，然后创建pureftpd数据表及赋予mysql中用户的权限。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATABASE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> pureftpd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pureftpd.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pureftpd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;对应的密码&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pureftpd.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pureftpd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost.localdomain&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;对应的密码&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pureftpd;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ftpd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> enum(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    Password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    Uid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Gid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ULBandwidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">smallint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DLBandwidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">smallint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    comment tinytext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ipaccess </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QuotaSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">smallint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QuotaFiles </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (User),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> User (User)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TYPE=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MyISAM;</span></span></code></pre></div><p>数据表说明：</p><blockquote><p>User：帐号名；</p><p>status：0 表示帐号被禁用，无法登录服务器；</p><p>Password：密码，使用MD5加密；</p><p>Uid：前面创建的ftpuser帐户号，我们填写的是2001；</p><p>Gid：前面创建的ftpgroup组号，我们填写的是2001；</p><p>Dir：虚拟用户的个人目录路径，将在/home下创建（第一次登录）；</p><p>ULBandwidth：上传文件限制速度，KB/s，0为不限制；</p><p>DLBandwidth：下载文件限制速度，KB/s，0为不限制；</p><p>comment：备注信息；</p><p>ipaccess：* 表示任意IP都可以访问此ftp服务器，输入具体IP地址可以只允许此IP连接服务器；</p><p>QuotaSize：用户磁盘空间分配，单位：MB，0表示不加限制；</p><p>QuotaFiles：用户可以保存的文件数量限制，0表示不加限制。</p></blockquote><p>下面这张图是表结构：</p><p><img src="`+t+'" alt=""></p><p>好了，向数据库中添加一个用户，把我们fptd的服务重启一下吧！</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#service pureftpd restart</span></span></code></pre></div><p>不出意外，我们的ftp服务是可以用了。</p>',35),l=[h];function k(e,r,d,E,g,o){return a(),i("div",null,l)}const c=s(n,[["render",k]]);export{y as __pageData,c as default};
